crystal_doc_search_index_callback({"repository_name":"zunsay","body":"# zunsay（仮）\n\nVOICEVOX Engine の API を呼び出すための Crystal 製 CLI ツール。\n\nこのツールは作りかけなので、プロジェクトの名前からオプションまでコロコロ変わる可能性があります。\n\n## 必要条件\n\n- [VOICEVOX Engine](https://github.com/VOICEVOX/voicevox_engine) がインストールされ、起動していること\n\n## インストール\n\n### GitHub Release からバイナリを入手\n\n右の[Release](https://github.com/kojix2/zunsay/releases)からダウンロード\n\n※ MacOS版は動的リンクが決め打ちなので自分でビルドしないと動きません\n\n### ソースからビルド\n\n```bash\ngit clone https://github.com/kojix2/zunsay.git\ncd zunsay\nshards install\nshards build --release\nbin/zunsay --version\n```\n\nビルドされた実行ファイル `zunsay` をパスの通った場所に配置してください。\n\n## 使い方\n\n### 話者一覧の表示\n\n利用可能な話者（キャラクター）とそのスタイルの一覧を表示します：\n\n```bash\nzunsay speakers\n```\n\n### 音声合成\n\nテキストから音声を合成します：\n\n```bash\nzunsay synthesis -t \"こんにちは、世界\" -s 1 -o output.wav\n```\n\nまたは：\n\n```bash\nzunsay -t \"こんにちは、世界\" -s 1 -o output.wav\n```\n\n### オプション\n\n```\n使用方法: zunsay <コマンド> [オプション]\n\nコマンド:\n    speakers                         speakers    利用可能な話者一覧を表示\n    synthesis                        テキストから音声を合成\n    query                            音声合成用クエリの操作\n\n一般オプション:\n    -t TEXT, --text=TEXT             合成するテキスト\n    -s ID, --speaker=ID              話者ID (デフォルト: 1)\n    -o FILE, --output=FILE           出力ファイル名 (デフォルト: output.wav)\n    -S SCALE, --speed=SCALE          話速のスケール (デフォルト: 1.0)\n    -T SCALE, --pitch=SCALE          音高のスケール (デフォルト: 0.0)\n    -I SCALE, --intonation=SCALE     抑揚のスケール (デフォルト: 1.0)\n    -V SCALE, --volume=SCALE         音量のスケール (デフォルト: 1.0)\n    -P, --play                       音声合成後に自動再生する\n    --host=HOST                      VOICEVOX Engine のホスト (デフォルト: 127.0.0.1)\n    --port=PORT                      VOICEVOX Engine のポート (デフォルト: 50021)\n    --stdin                          標準入力からテキストを読み込む\n    --version                        バージョンを表示\n    -d, --debug                      エラー時にバックトレースを表示\n    -h, --help                       ヘルプを表示\n```\n\n## 開発\n\nこのツールは、kojix2 が自分で使うためにマイペースに作っています。\nたまに使って、気が向いたらメンテナンスします。\n\n1. リポジトリをクローンします\n2. 依存関係をインストールします: `shards install`\n3. コードを変更します\n4. テストを実行します: `crystal spec`\n\n## 貢献\n\n1. フォークします (<https://github.com/kojix2/zunsay/fork>)\n2. 機能ブランチを作成します (`git checkout -b my-new-feature`)\n3. 変更をコミットします (`git commit -am 'Add some feature'`)\n4. ブランチにプッシュします (`git push origin my-new-feature`)\n5. プルリクエストを作成します\n\n## ライセンス\n\n[MIT](LICENSE)\n","program":{"html_id":"zunsay/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"zunsay","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"zunsay/Zunsay","path":"Zunsay.html","kind":"module","full_name":"Zunsay","name":"Zunsay","abstract":false,"locations":[{"filename":"src/zunsay/action.cr","line_number":1,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/action.cr#L1"},{"filename":"src/zunsay/cli.cr","line_number":10,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/cli.cr#L10"},{"filename":"src/zunsay/client.cr","line_number":1,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/client.cr#L1"},{"filename":"src/zunsay/config.cr","line_number":1,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/config.cr#L1"},{"filename":"src/zunsay/options.cr","line_number":4,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L4"},{"filename":"src/zunsay/parser.cr","line_number":6,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/parser.cr#L6"},{"filename":"src/zunsay/version.cr","line_number":1,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/version.cr#L1"}],"repository_name":"zunsay","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"DEFAULT_HOST","name":"DEFAULT_HOST","value":"\"127.0.0.1\""},{"id":"DEFAULT_PORT","name":"DEFAULT_PORT","value":"50021"},{"id":"VERSION","name":"VERSION","value":"{{ (`shards version /home/runner/work/zunsay/zunsay/src/zunsay`).chomp.stringify }}"}],"types":[{"html_id":"zunsay/Zunsay/Action","path":"Zunsay/Action.html","kind":"enum","full_name":"Zunsay::Action","name":"Action","abstract":false,"ancestors":[{"html_id":"zunsay/Enum","kind":"struct","full_name":"Enum","name":"Enum"},{"html_id":"zunsay/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"zunsay/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"zunsay/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/zunsay/action.cr","line_number":2,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/action.cr#L2"}],"repository_name":"zunsay","program":false,"enum":true,"alias":false,"const":false,"constants":[{"id":"Speakers","name":"Speakers","value":"0"},{"id":"Synthesis","name":"Synthesis","value":"1"},{"id":"Version","name":"Version","value":"2"},{"id":"Help","name":"Help","value":"3"},{"id":"CreateQuery","name":"CreateQuery","value":"4"},{"id":"ModifyQuery","name":"ModifyQuery","value":"5"}],"namespace":{"html_id":"zunsay/Zunsay","kind":"module","full_name":"Zunsay","name":"Zunsay"},"instance_methods":[{"html_id":"create_query?-instance-method","name":"create_query?","abstract":false,"location":{"filename":"src/zunsay/action.cr","line_number":7,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/action.cr#L7"},"def":{"name":"create_query?","visibility":"Public","body":"self == CreateQuery"}},{"html_id":"help?-instance-method","name":"help?","abstract":false,"location":{"filename":"src/zunsay/action.cr","line_number":6,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/action.cr#L6"},"def":{"name":"help?","visibility":"Public","body":"self == Help"}},{"html_id":"modify_query?-instance-method","name":"modify_query?","abstract":false,"location":{"filename":"src/zunsay/action.cr","line_number":8,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/action.cr#L8"},"def":{"name":"modify_query?","visibility":"Public","body":"self == ModifyQuery"}},{"html_id":"speakers?-instance-method","name":"speakers?","abstract":false,"location":{"filename":"src/zunsay/action.cr","line_number":3,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/action.cr#L3"},"def":{"name":"speakers?","visibility":"Public","body":"self == Speakers"}},{"html_id":"synthesis?-instance-method","name":"synthesis?","abstract":false,"location":{"filename":"src/zunsay/action.cr","line_number":4,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/action.cr#L4"},"def":{"name":"synthesis?","visibility":"Public","body":"self == Synthesis"}},{"html_id":"version?-instance-method","name":"version?","abstract":false,"location":{"filename":"src/zunsay/action.cr","line_number":5,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/action.cr#L5"},"def":{"name":"version?","visibility":"Public","body":"self == Version"}}]},{"html_id":"zunsay/Zunsay/CLI","path":"Zunsay/CLI.html","kind":"class","full_name":"Zunsay::CLI","name":"CLI","abstract":false,"superclass":{"html_id":"zunsay/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"zunsay/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"zunsay/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/zunsay/cli.cr","line_number":11,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/cli.cr#L11"}],"repository_name":"zunsay","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"zunsay/Zunsay","kind":"module","full_name":"Zunsay","name":"Zunsay"},"class_methods":[{"html_id":"debug:Bool-class-method","name":"debug","abstract":false,"location":{"filename":"src/zunsay/cli.cr","line_number":12,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/cli.cr#L12"},"def":{"name":"debug","return_type":"Bool","visibility":"Public","body":"@@debug"}},{"html_id":"debug=(debug:Bool)-class-method","name":"debug=","abstract":false,"args":[{"name":"debug","external_name":"debug","restriction":"Bool"}],"args_string":"(debug : Bool)","args_html":"(debug : Bool)","location":{"filename":"src/zunsay/cli.cr","line_number":12,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/cli.cr#L12"},"def":{"name":"debug=","args":[{"name":"debug","external_name":"debug","restriction":"Bool"}],"visibility":"Public","body":"@@debug = debug"}}],"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/zunsay/cli.cr","line_number":16,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/cli.cr#L16"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"option:Options-instance-method","name":"option","abstract":false,"location":{"filename":"src/zunsay/cli.cr","line_number":14,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/cli.cr#L14"},"def":{"name":"option","return_type":"Options","visibility":"Public","body":"@option"}},{"html_id":"parser:Parser-instance-method","name":"parser","abstract":false,"location":{"filename":"src/zunsay/cli.cr","line_number":13,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/cli.cr#L13"},"def":{"name":"parser","return_type":"Parser","visibility":"Public","body":"@parser"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/zunsay/cli.cr","line_number":21,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/cli.cr#L21"},"def":{"name":"run","visibility":"Public","body":"begin\n  case option.action\n  when Action::Speakers\n    show_speakers\n  when Action::Synthesis\n    synthesize_voice\n  when Action::Version\n    print_version\n  when Action::Help\n    print_help\n  when Action::CreateQuery\n    create_query\n  when Action::ModifyQuery\n    modify_query\n  else\n    raise(ArgumentError.new(\"不明なアクション: #{option.action}\"))\n  end\nrescue ex : Crest::RequestFailed\n  error_message = \"\\n[zunsay] #{\"エラー:\".colorize.red.bold} #{ex.class} #{ex.message}\"\n  error_message = error_message + \"\\n#{\"ステータスコード:\".colorize.yellow} #{ex.http_code}\"\n  if ex.response\n    error_message = error_message + \"\\n#{\"レスポンス:\".colorize.yellow} #{ex.response.body}\"\n  end\n  if CLI.debug\n    error_message = error_message + \"\\n#{ex.backtrace.join(\"\\n\")}\"\n  end\n  STDERR.puts(error_message)\n  exit(1)\nrescue ex : Crest::RequestTimeout\n  error_message = \"\\n[zunsay] #{\"エラー:\".colorize.red.bold} VOICEVOX Engine に接続できませんでした。\"\n  error_message = error_message + \"\\nホスト #{option.host}:#{option.port} が正しいか、Engine が起動しているか確認してください。\"\n  if CLI.debug\n    error_message = error_message + \"\\n#{ex.backtrace.join(\"\\n\")}\"\n  end\n  STDERR.puts(error_message)\n  exit(1)\nrescue ex\n  error_message = \"\\n[zunsay] #{\"エラー:\".colorize.red.bold} #{ex.message}\"\n  if CLI.debug\n    error_message = error_message + \"\\n#{ex.backtrace.join(\"\\n\")}\"\n  end\n  STDERR.puts(error_message)\n  exit(1)\nend"}}]},{"html_id":"zunsay/Zunsay/Client","path":"Zunsay/Client.html","kind":"class","full_name":"Zunsay::Client","name":"Client","abstract":false,"superclass":{"html_id":"zunsay/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"zunsay/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"zunsay/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/zunsay/client.cr","line_number":3,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/client.cr#L3"}],"repository_name":"zunsay","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"zunsay/Zunsay","kind":"module","full_name":"Zunsay","name":"Zunsay"},"doc":"API クライアントクラス","summary":"<p>API クライアントクラス</p>","constructors":[{"html_id":"new(host:String=DEFAULT_HOST,port:Int32=DEFAULT_PORT)-class-method","name":"new","abstract":false,"args":[{"name":"host","default_value":"DEFAULT_HOST","external_name":"host","restriction":"::String"},{"name":"port","default_value":"DEFAULT_PORT","external_name":"port","restriction":"::Int32"}],"args_string":"(host : String = DEFAULT_HOST, port : Int32 = DEFAULT_PORT)","args_html":"(host : String = <span class=\"t\">DEFAULT_HOST</span>, port : Int32 = <span class=\"t\">DEFAULT_PORT</span>)","location":{"filename":"src/zunsay/client.cr","line_number":7,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/client.cr#L7"},"def":{"name":"new","args":[{"name":"host","default_value":"DEFAULT_HOST","external_name":"host","restriction":"::String"},{"name":"port","default_value":"DEFAULT_PORT","external_name":"port","restriction":"::Int32"}],"visibility":"Public","body":"_ = allocate\n_.initialize(host, port)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"apply_parameters(query:JSON::Any,options:Options):JSON::Any-instance-method","name":"apply_parameters","doc":"音声合成用のクエリにパラメータを適用する","summary":"<p>音声合成用のクエリにパラメータを適用する</p>","abstract":false,"args":[{"name":"query","external_name":"query","restriction":"JSON::Any"},{"name":"options","external_name":"options","restriction":"Options"}],"args_string":"(query : JSON::Any, options : Options) : JSON::Any","args_html":"(query : JSON::Any, options : <a href=\"../Zunsay/Options.html\">Options</a>) : JSON::Any","location":{"filename":"src/zunsay/client.cr","line_number":30,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/client.cr#L30"},"def":{"name":"apply_parameters","args":[{"name":"query","external_name":"query","restriction":"JSON::Any"},{"name":"options","external_name":"options","restriction":"Options"}],"return_type":"JSON::Any","visibility":"Public","body":"query_hash = query.as_h\nquery_hash[\"speedScale\"] = JSON::Any.new(options.speed_scale)\nquery_hash[\"pitchScale\"] = JSON::Any.new(options.pitch_scale)\nquery_hash[\"intonationScale\"] = JSON::Any.new(options.intonation_scale)\nquery_hash[\"volumeScale\"] = JSON::Any.new(options.volume_scale)\nJSON::Any.new(query_hash)\n"}},{"html_id":"audio_query(text:String,speaker_id:Int32)-instance-method","name":"audio_query","doc":"音声合成用のクエリを作成する","summary":"<p>音声合成用のクエリを作成する</p>","abstract":false,"args":[{"name":"text","external_name":"text","restriction":"String"},{"name":"speaker_id","external_name":"speaker_id","restriction":"Int32"}],"args_string":"(text : String, speaker_id : Int32)","args_html":"(text : String, speaker_id : Int32)","location":{"filename":"src/zunsay/client.cr","line_number":22,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/client.cr#L22"},"def":{"name":"audio_query","args":[{"name":"text","external_name":"text","restriction":"String"},{"name":"speaker_id","external_name":"speaker_id","restriction":"Int32"}],"visibility":"Public","body":"response = Crest.post(\"#{base_url}/audio_query?text=#{URI.encode_www_form(text)}&speaker=#{speaker_id}\")\nJSON.parse(response.body)\n"}},{"html_id":"base_url-instance-method","name":"base_url","doc":"API のベース URL を返す","summary":"<p>API のベース URL を返す</p>","abstract":false,"location":{"filename":"src/zunsay/client.cr","line_number":11,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/client.cr#L11"},"def":{"name":"base_url","visibility":"Public","body":"\"http://#{@host}:#{@port}\""}},{"html_id":"host:String-instance-method","name":"host","abstract":false,"location":{"filename":"src/zunsay/client.cr","line_number":4,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/client.cr#L4"},"def":{"name":"host","return_type":"String","visibility":"Public","body":"@host"}},{"html_id":"port:Int32-instance-method","name":"port","abstract":false,"location":{"filename":"src/zunsay/client.cr","line_number":5,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/client.cr#L5"},"def":{"name":"port","return_type":"Int32","visibility":"Public","body":"@port"}},{"html_id":"speakers-instance-method","name":"speakers","doc":"スピーカー一覧を取得する","summary":"<p>スピーカー一覧を取得する</p>","abstract":false,"location":{"filename":"src/zunsay/client.cr","line_number":16,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/client.cr#L16"},"def":{"name":"speakers","visibility":"Public","body":"response = Crest.get(\"#{base_url}/speakers\")\nJSON.parse(response.body)\n"}},{"html_id":"synthesis(audio_query:JSON::Any,speaker_id:Int32,output_file:String)-instance-method","name":"synthesis","doc":"音声合成を実行する","summary":"<p>音声合成を実行する</p>","abstract":false,"args":[{"name":"audio_query","external_name":"audio_query","restriction":"JSON::Any"},{"name":"speaker_id","external_name":"speaker_id","restriction":"Int32"},{"name":"output_file","external_name":"output_file","restriction":"String"}],"args_string":"(audio_query : JSON::Any, speaker_id : Int32, output_file : String)","args_html":"(audio_query : JSON::Any, speaker_id : Int32, output_file : String)","location":{"filename":"src/zunsay/client.cr","line_number":40,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/client.cr#L40"},"def":{"name":"synthesis","args":[{"name":"audio_query","external_name":"audio_query","restriction":"JSON::Any"},{"name":"speaker_id","external_name":"speaker_id","restriction":"Int32"},{"name":"output_file","external_name":"output_file","restriction":"String"}],"visibility":"Public","body":"resource = Crest::Resource.new(\"#{base_url}\", headers: {\"Content-Type\" => \"application/json\", \"Accept\" => \"audio/wav\"})\nresponse = resource.post(\"/synthesis?speaker=#{speaker_id}\", audio_query.to_json)\nFile.write(output_file, response.body)\n"}}]},{"html_id":"zunsay/Zunsay/Options","path":"Zunsay/Options.html","kind":"class","full_name":"Zunsay::Options","name":"Options","abstract":false,"superclass":{"html_id":"zunsay/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"zunsay/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"zunsay/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/zunsay/options.cr","line_number":5,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L5"}],"repository_name":"zunsay","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"zunsay/Zunsay","kind":"module","full_name":"Zunsay","name":"Zunsay"},"instance_methods":[{"html_id":"action:Action-instance-method","name":"action","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":6,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L6"},"def":{"name":"action","return_type":"Action","visibility":"Public","body":"@action"}},{"html_id":"action=(action:Action)-instance-method","name":"action=","abstract":false,"args":[{"name":"action","external_name":"action","restriction":"Action"}],"args_string":"(action : Action)","args_html":"(action : <a href=\"../Zunsay/Action.html\">Action</a>)","location":{"filename":"src/zunsay/options.cr","line_number":6,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L6"},"def":{"name":"action=","args":[{"name":"action","external_name":"action","restriction":"Action"}],"visibility":"Public","body":"@action = action"}},{"html_id":"filter:String-instance-method","name":"filter","doc":"フィルタリング設定","summary":"<p>フィルタリング設定</p>","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":32,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L32"},"def":{"name":"filter","return_type":"String","visibility":"Public","body":"@filter"}},{"html_id":"filter=(filter:String)-instance-method","name":"filter=","doc":"フィルタリング設定","summary":"<p>フィルタリング設定</p>","abstract":false,"args":[{"name":"filter","external_name":"filter","restriction":"String"}],"args_string":"(filter : String)","args_html":"(filter : String)","location":{"filename":"src/zunsay/options.cr","line_number":32,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L32"},"def":{"name":"filter=","args":[{"name":"filter","external_name":"filter","restriction":"String"}],"visibility":"Public","body":"@filter = filter"}},{"html_id":"host:String-instance-method","name":"host","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":7,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L7"},"def":{"name":"host","return_type":"String","visibility":"Public","body":"@host"}},{"html_id":"host=(host:String)-instance-method","name":"host=","abstract":false,"args":[{"name":"host","external_name":"host","restriction":"String"}],"args_string":"(host : String)","args_html":"(host : String)","location":{"filename":"src/zunsay/options.cr","line_number":7,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L7"},"def":{"name":"host=","args":[{"name":"host","external_name":"host","restriction":"String"}],"visibility":"Public","body":"@host = host"}},{"html_id":"input_file:String-instance-method","name":"input_file","doc":"入力ファイル（クエリJSONなど）","summary":"<p>入力ファイル（クエリJSONなど）</p>","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":26,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L26"},"def":{"name":"input_file","return_type":"String","visibility":"Public","body":"@input_file"}},{"html_id":"input_file=(input_file:String)-instance-method","name":"input_file=","doc":"入力ファイル（クエリJSONなど）","summary":"<p>入力ファイル（クエリJSONなど）</p>","abstract":false,"args":[{"name":"input_file","external_name":"input_file","restriction":"String"}],"args_string":"(input_file : String)","args_html":"(input_file : String)","location":{"filename":"src/zunsay/options.cr","line_number":26,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L26"},"def":{"name":"input_file=","args":[{"name":"input_file","external_name":"input_file","restriction":"String"}],"visibility":"Public","body":"@input_file = input_file"}},{"html_id":"intonation_scale:Float64-instance-method","name":"intonation_scale","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":16,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L16"},"def":{"name":"intonation_scale","return_type":"Float64","visibility":"Public","body":"@intonation_scale"}},{"html_id":"intonation_scale=(intonation_scale:Float64)-instance-method","name":"intonation_scale=","abstract":false,"args":[{"name":"intonation_scale","external_name":"intonation_scale","restriction":"Float64"}],"args_string":"(intonation_scale : Float64)","args_html":"(intonation_scale : Float64)","location":{"filename":"src/zunsay/options.cr","line_number":16,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L16"},"def":{"name":"intonation_scale=","args":[{"name":"intonation_scale","external_name":"intonation_scale","restriction":"Float64"}],"visibility":"Public","body":"@intonation_scale = intonation_scale"}},{"html_id":"output_file:String-instance-method","name":"output_file","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":11,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L11"},"def":{"name":"output_file","return_type":"String","visibility":"Public","body":"@output_file"}},{"html_id":"output_file=(output_file:String)-instance-method","name":"output_file=","abstract":false,"args":[{"name":"output_file","external_name":"output_file","restriction":"String"}],"args_string":"(output_file : String)","args_html":"(output_file : String)","location":{"filename":"src/zunsay/options.cr","line_number":11,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L11"},"def":{"name":"output_file=","args":[{"name":"output_file","external_name":"output_file","restriction":"String"}],"visibility":"Public","body":"@output_file = output_file"}},{"html_id":"output_format:String-instance-method","name":"output_format","doc":"出力形式","summary":"<p>出力形式</p>","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":29,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L29"},"def":{"name":"output_format","return_type":"String","visibility":"Public","body":"@output_format"}},{"html_id":"output_format=(output_format:String)-instance-method","name":"output_format=","doc":"出力形式","summary":"<p>出力形式</p>","abstract":false,"args":[{"name":"output_format","external_name":"output_format","restriction":"String"}],"args_string":"(output_format : String)","args_html":"(output_format : String)","location":{"filename":"src/zunsay/options.cr","line_number":29,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L29"},"def":{"name":"output_format=","args":[{"name":"output_format","external_name":"output_format","restriction":"String"}],"visibility":"Public","body":"@output_format = output_format"}},{"html_id":"pitch_scale:Float64-instance-method","name":"pitch_scale","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":15,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L15"},"def":{"name":"pitch_scale","return_type":"Float64","visibility":"Public","body":"@pitch_scale"}},{"html_id":"pitch_scale=(pitch_scale:Float64)-instance-method","name":"pitch_scale=","abstract":false,"args":[{"name":"pitch_scale","external_name":"pitch_scale","restriction":"Float64"}],"args_string":"(pitch_scale : Float64)","args_html":"(pitch_scale : Float64)","location":{"filename":"src/zunsay/options.cr","line_number":15,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L15"},"def":{"name":"pitch_scale=","args":[{"name":"pitch_scale","external_name":"pitch_scale","restriction":"Float64"}],"visibility":"Public","body":"@pitch_scale = pitch_scale"}},{"html_id":"play:Bool-instance-method","name":"play","doc":"音声再生の設定","summary":"<p>音声再生の設定</p>","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":20,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L20"},"def":{"name":"play","return_type":"Bool","visibility":"Public","body":"@play"}},{"html_id":"play=(play:Bool)-instance-method","name":"play=","doc":"音声再生の設定","summary":"<p>音声再生の設定</p>","abstract":false,"args":[{"name":"play","external_name":"play","restriction":"Bool"}],"args_string":"(play : Bool)","args_html":"(play : Bool)","location":{"filename":"src/zunsay/options.cr","line_number":20,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L20"},"def":{"name":"play=","args":[{"name":"play","external_name":"play","restriction":"Bool"}],"visibility":"Public","body":"@play = play"}},{"html_id":"port:Int32-instance-method","name":"port","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":8,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L8"},"def":{"name":"port","return_type":"Int32","visibility":"Public","body":"@port"}},{"html_id":"port=(port:Int32)-instance-method","name":"port=","abstract":false,"args":[{"name":"port","external_name":"port","restriction":"Int32"}],"args_string":"(port : Int32)","args_html":"(port : Int32)","location":{"filename":"src/zunsay/options.cr","line_number":8,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L8"},"def":{"name":"port=","args":[{"name":"port","external_name":"port","restriction":"Int32"}],"visibility":"Public","body":"@port = port"}},{"html_id":"speaker_id:Int32-instance-method","name":"speaker_id","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":10,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L10"},"def":{"name":"speaker_id","return_type":"Int32","visibility":"Public","body":"@speaker_id"}},{"html_id":"speaker_id=(speaker_id:Int32)-instance-method","name":"speaker_id=","abstract":false,"args":[{"name":"speaker_id","external_name":"speaker_id","restriction":"Int32"}],"args_string":"(speaker_id : Int32)","args_html":"(speaker_id : Int32)","location":{"filename":"src/zunsay/options.cr","line_number":10,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L10"},"def":{"name":"speaker_id=","args":[{"name":"speaker_id","external_name":"speaker_id","restriction":"Int32"}],"visibility":"Public","body":"@speaker_id = speaker_id"}},{"html_id":"speed_scale:Float64-instance-method","name":"speed_scale","doc":"音声合成の詳細設定","summary":"<p>音声合成の詳細設定</p>","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":14,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L14"},"def":{"name":"speed_scale","return_type":"Float64","visibility":"Public","body":"@speed_scale"}},{"html_id":"speed_scale=(speed_scale:Float64)-instance-method","name":"speed_scale=","doc":"音声合成の詳細設定","summary":"<p>音声合成の詳細設定</p>","abstract":false,"args":[{"name":"speed_scale","external_name":"speed_scale","restriction":"Float64"}],"args_string":"(speed_scale : Float64)","args_html":"(speed_scale : Float64)","location":{"filename":"src/zunsay/options.cr","line_number":14,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L14"},"def":{"name":"speed_scale=","args":[{"name":"speed_scale","external_name":"speed_scale","restriction":"Float64"}],"visibility":"Public","body":"@speed_scale = speed_scale"}},{"html_id":"stdin:Bool-instance-method","name":"stdin","doc":"標準入力からテキストを読み込む設定","summary":"<p>標準入力からテキストを読み込む設定</p>","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":23,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L23"},"def":{"name":"stdin","return_type":"Bool","visibility":"Public","body":"@stdin"}},{"html_id":"stdin=(stdin:Bool)-instance-method","name":"stdin=","doc":"標準入力からテキストを読み込む設定","summary":"<p>標準入力からテキストを読み込む設定</p>","abstract":false,"args":[{"name":"stdin","external_name":"stdin","restriction":"Bool"}],"args_string":"(stdin : Bool)","args_html":"(stdin : Bool)","location":{"filename":"src/zunsay/options.cr","line_number":23,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L23"},"def":{"name":"stdin=","args":[{"name":"stdin","external_name":"stdin","restriction":"Bool"}],"visibility":"Public","body":"@stdin = stdin"}},{"html_id":"text:String-instance-method","name":"text","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":9,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L9"},"def":{"name":"text","return_type":"String","visibility":"Public","body":"@text"}},{"html_id":"text=(text:String)-instance-method","name":"text=","abstract":false,"args":[{"name":"text","external_name":"text","restriction":"String"}],"args_string":"(text : String)","args_html":"(text : String)","location":{"filename":"src/zunsay/options.cr","line_number":9,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L9"},"def":{"name":"text=","args":[{"name":"text","external_name":"text","restriction":"String"}],"visibility":"Public","body":"@text = text"}},{"html_id":"volume_scale:Float64-instance-method","name":"volume_scale","abstract":false,"location":{"filename":"src/zunsay/options.cr","line_number":17,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L17"},"def":{"name":"volume_scale","return_type":"Float64","visibility":"Public","body":"@volume_scale"}},{"html_id":"volume_scale=(volume_scale:Float64)-instance-method","name":"volume_scale=","abstract":false,"args":[{"name":"volume_scale","external_name":"volume_scale","restriction":"Float64"}],"args_string":"(volume_scale : Float64)","args_html":"(volume_scale : Float64)","location":{"filename":"src/zunsay/options.cr","line_number":17,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/options.cr#L17"},"def":{"name":"volume_scale=","args":[{"name":"volume_scale","external_name":"volume_scale","restriction":"Float64"}],"visibility":"Public","body":"@volume_scale = volume_scale"}}]},{"html_id":"zunsay/Zunsay/Parser","path":"Zunsay/Parser.html","kind":"class","full_name":"Zunsay::Parser","name":"Parser","abstract":false,"superclass":{"html_id":"zunsay/OptionParser","kind":"class","full_name":"OptionParser","name":"OptionParser"},"ancestors":[{"html_id":"zunsay/OptionParser","kind":"class","full_name":"OptionParser","name":"OptionParser"},{"html_id":"zunsay/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"zunsay/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/zunsay/parser.cr","line_number":7,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/parser.cr#L7"}],"repository_name":"zunsay","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"zunsay/Zunsay","kind":"module","full_name":"Zunsay","name":"Zunsay"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/zunsay/parser.cr","line_number":56,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/parser.cr#L56"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"help_message:String-instance-method","name":"help_message","abstract":false,"location":{"filename":"src/zunsay/parser.cr","line_number":203,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/parser.cr#L203"},"def":{"name":"help_message","return_type":"String","visibility":"Public","body":"@help_message"}},{"html_id":"help_message=(help_message:String)-instance-method","name":"help_message=","abstract":false,"args":[{"name":"help_message","external_name":"help_message","restriction":"String"}],"args_string":"(help_message : String)","args_html":"(help_message : String)","location":{"filename":"src/zunsay/parser.cr","line_number":10,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/parser.cr#L10"},"def":{"name":"help_message=","args":[{"name":"help_message","external_name":"help_message","restriction":"String"}],"visibility":"Public","body":"@help_message = help_message"}},{"html_id":"options:Options-instance-method","name":"options","abstract":false,"location":{"filename":"src/zunsay/parser.cr","line_number":8,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/parser.cr#L8"},"def":{"name":"options","return_type":"Options","visibility":"Public","body":"@options"}},{"html_id":"parse(args:Array(String)):Options-instance-method","name":"parse","abstract":false,"args":[{"name":"args","external_name":"args","restriction":"Array(String)"}],"args_string":"(args : Array(String)) : Options","args_html":"(args : Array(String)) : <a href=\"../Zunsay/Options.html\">Options</a>","location":{"filename":"src/zunsay/parser.cr","line_number":173,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/parser.cr#L173"},"def":{"name":"parse","args":[{"name":"args","external_name":"args","restriction":"Array(String)"}],"return_type":"Options","visibility":"Public","body":"super(args)\nif args.size > 0\n  command = args[0]\n  case command\n  when \"speakers\"\n    @options.action = Action::Speakers\n  when \"synthesis\"\n    @options.action = Action::Synthesis\n  when \"query\"\n  else\n    if @options.text.empty? && !([\"--help\", \"-h\", \"--version\", \"-d\", \"--debug\"].includes?(command))\n      @options.text = args.join(\" \")\n    end\n  end\nend\nif (@options.stdin || @options.text.empty?) && !STDIN.tty?\n  @options.text = STDIN.gets_to_end.chomp\nend\n@options\n"}}],"macros":[{"html_id":"_connection_options_-macro","name":"_connection_options_","doc":"接続設定オプション用マクロ","summary":"<p>接続設定オプション用マクロ</p>","abstract":false,"location":{"filename":"src/zunsay/parser.cr","line_number":51,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/parser.cr#L51"},"def":{"name":"_connection_options_","visibility":"Public","body":"      on(\"--host=HOST\", \"VOICEVOX Engine のホスト (デフォルト: #{DEFAULT_HOST})\") \n{ |h| @options.host = h }\n      on(\"--port=PORT\", \"VOICEVOX Engine のポート (デフォルト: #{DEFAULT_PORT})\") \n{ |p| @options.port = p.to_i }\n    \n"}},{"html_id":"_on_debug_-macro","name":"_on_debug_","doc":"デバッグオプション用マクロ","summary":"<p>デバッグオプション用マクロ</p>","abstract":false,"location":{"filename":"src/zunsay/parser.cr","line_number":13,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/parser.cr#L13"},"def":{"name":"_on_debug_","visibility":"Public","body":"      on(\"-d\", \"--debug\", \"エラー時にバックトレースを表示\") do\n        CLI.debug = true\n      \nend\n    \n"}},{"html_id":"_on_help_-macro","name":"_on_help_","doc":"ヘルプオプション用マクロ","summary":"<p>ヘルプオプション用マクロ</p>","abstract":false,"location":{"filename":"src/zunsay/parser.cr","line_number":20,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/parser.cr#L20"},"def":{"name":"_on_help_","visibility":"Public","body":"      on(\"-h\", \"--help\", \"ヘルプを表示\") do\n        @options.action = Action::Help\n      \nend\n\n      @help_message = self.to_s\n    \n"}},{"html_id":"_set_action_(action,banner)-macro","name":"_set_action_","doc":"アクションとバナーを設定するマクロ","summary":"<p>アクションとバナーを設定するマクロ</p>","abstract":false,"args":[{"name":"action","external_name":"action","restriction":""},{"name":"banner","external_name":"banner","restriction":""}],"args_string":"(action, banner)","args_html":"(action, banner)","location":{"filename":"src/zunsay/parser.cr","line_number":29,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/parser.cr#L29"},"def":{"name":"_set_action_","args":[{"name":"action","external_name":"action","restriction":""},{"name":"banner","external_name":"banner","restriction":""}],"visibility":"Public","body":"      @options.action = \n{{ action }}\n\n      @handlers.clear\n      @flags.clear\n      self.banner = \n{{ banner }}\n\n    \n"}},{"html_id":"_synthesis_options_-macro","name":"_synthesis_options_","doc":"音声合成の共通オプション用マクロ","summary":"<p>音声合成の共通オプション用マクロ</p>","abstract":false,"location":{"filename":"src/zunsay/parser.cr","line_number":37,"url":"https://github.com/kojix2/zunsay/blob/1873120f6dbef1738930cb77ac6b9eb8e209127d/src/zunsay/parser.cr#L37"},"def":{"name":"_synthesis_options_","visibility":"Public","body":"      on(\"-t TEXT\", \"--text=TEXT\", \"合成するテキスト\") \n{ |t| @options.text = t }\n      on(\"-s ID\", \"--speaker=ID\", \"話者ID (デフォルト: 1)\") \n{ |s| @options.speaker_id = s.to_i }\n      on(\"-o FILE\", \"--output=FILE\", \"出力ファイル名 (デフォルト: output.wav)\") \n{ |o| @options.output_file = o }\n\n      \n# 音声合成の詳細設定オプション\n\n      on(\"-S SCALE\", \"--speed=SCALE\", \"話速のスケール (デフォルト: 1.0)\") \n{ |s| @options.speed_scale = s.to_f }\n      on(\"-T SCALE\", \"--pitch=SCALE\", \"音高のスケール (デフォルト: 0.0)\") \n{ |p| @options.pitch_scale = p.to_f }\n      on(\"-I SCALE\", \"--intonation=SCALE\", \"抑揚のスケール (デフォルト: 1.0)\") \n{ |i| @options.intonation_scale = i.to_f }\n      on(\"-V SCALE\", \"--volume=SCALE\", \"音量のスケール (デフォルト: 1.0)\") \n{ |v| @options.volume_scale = v.to_f }\n      on(\"-P\", \"--play\", \"音声合成後に自動再生する\") \n{ @options.play = true }\n    \n"}}]}]}]}})